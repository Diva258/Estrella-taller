<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Atrapa la Estrella — v5</title>
<style>
  body{font-family:Arial;margin:0;display:flex;flex-direction:column;align-items:center;padding-top:20px;height:100vh}
  #star{position:absolute;font-size:64px;cursor:pointer;user-select:none;transition:transform .12s}
  .hud{margin-top:10px;font-size:18px;display:flex;gap:14px;align-items:center}
  button{padding:6px 10px;border-radius:6px;border:0;background:#2b8ae2;color:#fff;cursor:pointer}
  #msg{margin-top:8px;color:#b00020}
</style>
</head>
<body>
  <h1>Atrapa la Estrella — Versión 5</h1>
  <div class="hud">
    <div>Puntos: <strong id="points">0</strong></div>
    <div>Tiempo: <strong id="time">20</strong>s</div>
    <div>Nivel: <strong id="level">1</strong></div>
    <button id="restartBtn" style="display:none">Reiniciar</button>
  </div>
  <div id="star">⭐</div>
  <div id="msg"></div>

  <script>
    let points = 0;
    const star = document.getElementById('star');
    const pointsEl = document.getElementById('points');
    const timeEl = document.getElementById('time');
    const levelEl = document.getElementById('level');
    const restartBtn = document.getElementById('restartBtn');
    const msg = document.getElementById('msg');

    let gameTime = 20;
    let timeLeft = gameTime;
    let gameInterval = null;
    let moveTimeout = null;
    let baseDelay = 1400; // tiempo entre movimientos inicial
    let visible = true;

    function moveStarRandom() {
      const rect = star.getBoundingClientRect();
      const maxX = window.innerWidth - rect.width - 10;
      const maxY = window.innerHeight - rect.height - 10;
      const x = Math.random() * Math.max(0, maxX);
      const y = Math.random() * Math.max(0, maxY);
      star.style.left = x + 'px';
      star.style.top = y + 'px';
    }

    function scheduleNextMove() {
      clearTimeout(moveTimeout);
      // dificultad: reduce delay conforme puntos suben
      const delay = Math.max(350, baseDelay - points * 80);
      moveTimeout = setTimeout(()=>{
        if (timeLeft <= 0) return;
        moveStarRandom();
        scheduleNextMove();
      }, delay);
    }

    function startGame() {
      points = 0; timeLeft = gameTime;
      pointsEl.textContent = points; timeEl.textContent = timeLeft; levelEl.textContent = 1;
      restartBtn.style.display = 'none'; star.style.pointerEvents = 'auto'; msg.textContent = '';
      moveStarRandom();
      scheduleNextMove();
      gameInterval = setInterval(()=>{
        timeLeft--;
        timeEl.textContent = timeLeft;
        if (timeLeft <= 0) endGame();
      }, 1000);
    }

    function endGame() {
      clearInterval(gameInterval); clearTimeout(moveTimeout);
      star.style.pointerEvents = 'none';
      restartBtn.style.display = 'inline-block';
      msg.textContent = 'Juego terminado. ¡Buen intento!';
      alert('Tiempo terminado. Puntos: ' + points);
    }

    star.addEventListener('click', () => {
      if (timeLeft <= 0) return;
      points++;
      pointsEl.textContent = points;
      // subir nivel cada 5 puntos
      const lvl = Math.floor(points / 5) + 1;
      levelEl.textContent = lvl;
      // efecto visual breve
      star.style.transform = 'scale(1.25)';
      setTimeout(()=> star.style.transform = '', 120);
      // mover inmediatamente y ajustar dificultad
      moveStarRandom();
      scheduleNextMove();
    });

    restartBtn.addEventListener('click', startGame);
    window.addEventListener('load', startGame);
    window.addEventListener('resize', moveStarRandom);
  </script>
</body>
</html>


